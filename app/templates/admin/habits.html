{# app/templates/admin/habits.html #}
{% extends "base.html" %}
{% block title %}Admin â€“ Habit Management{% endblock %}

{% block content %}
  <h2 class="title">Habit Management</h2>

  <table class="sheet">
    <thead>
      <tr>
        <th>ID</th>
        <th>Owner ID</th>
        <th>Name</th>
        <th>Frequency</th>
        <th>Streak</th>
        <th>Last Completed</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for habit in habits %}
        <tr>
          <td>{{ habit.id }}</td>
          <td>{{ habit.owner_id }}</td>
          <td>{{ habit.name }}</td>
          <td>{{ habit.frequency.value }}</td>
          <td>
            {% if habit.current_streak > 0 %}
              ðŸ”¥ {{ habit.current_streak }}
            {% else %}
              â€“
            {% endif %}
          </td>
          <td>
            {% if habit.last_completed_date %}
              {{ habit.last_completed_date.strftime('%Y-%m-%d') }}
            {% else %}
              â€“
            {% endif %}
          </td>
          <td>
            <form data-method="DELETE" data-url="{{request.url_for('admin_delete_habits', habit_id=habit.id)}}" data-redirect="{{request.url_for('admin_list_habits')}}"
                  data-confirm="Do you want to delete habit"
            >
              <button class="btn-sm btn-delete" type="submit">
                Delete
              </button>
            </form>
          </td>
        </tr>
      {% endfor %}
      {% if habits|length == 0 %}
        <tr>
          <td colspan="8" class="no-data">No habits found.</td>
        </tr>
      {% endif %}
    </tbody>
  </table>
{% endblock %}
